/* ========================================
   1. GLOBAL VARIABLES & DESIGN SYSTEM
   Defines the color palette, typography, 
   and reusable tokens like shadows/radius.
======================================== */
:root {
    --font-display: 'Outfit', sans-serif;
    /* Heading font style */
    --font-body: 'Inter', sans-serif;
    /* Main content font style */

    --color-bg: #f5f7fa;
    /* Background color of the page */
    --color-surface: #ffffff;
    /* Card and surface background color */
    --color-surface-glass: rgba(255, 255, 255, 0.85);
    /* Transparent glass header effect */
    --color-primary: #4f46e5;
    /* Main branding indigo color */
    --color-primary-light: #6366f1;
    /* Hover state for primary buttons */
    --color-success: #10b981;
    /* Success green for printing/saving */
    --color-success-light: #059669;
    /* Hover state for success elements */
    --color-accent: #7c3aed;
    /* Secondary purple accent color */
    --color-accent-light: #8b5cf6;
    /* Hover state for accent elements */
    --color-text: #0f172a;
    /* Deep blue-black for main text */
    --color-text-muted: #64748b;
    /* Grayish blue for subtle text */
    --color-border: #e2e8f0;
    /* Base color for lines and borders */
    --color-border-hover: #cbd5e1;
    /* Hover state color for borders */

    --radius-sm: 8px;
    /* Small corner rounding */
    --radius-md: 12px;
    /* Standard corner rounding */
    --radius-lg: 20px;
    /* Large corner rounding for cards */

    --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
    /* Tiny shadow for flat icons */
    --shadow-md: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
    /* Regular shadow */
    --shadow-lg: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
    /* Heavy drop shadow */
    --shadow-primary: 0 10px 15px -3px rgba(79, 70, 229, 0.3);
    /* Glowing indigo shadow */
}

/* Main content fade effect */
.app-main {
    transition: opacity 0.5s ease;
}

/* Modal open-la irukum pothu main content-ah block panna */
body:has(.modal-overlay[style*="display: flex"]) .app-main {
    filter: blur(5px);
}

/* Print trigger hover effect */
.print-trigger:hover {
    background: var(--color-success-light) !important;
    transform: scale(1.05);
}

/* --- History Panel --- */
.history-list {
    display: flex;
    flex-direction: column;
    gap: 8px;
    margin-top: 20px;
}

.history-item {
    background: var(--color-bg);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-md);
    padding: 10px 16px;
    transition: all 0.2s;
    cursor: pointer;
    display: grid;
    /* Grid layout for perfect column alignment: Name, Subject, Date, Marks, Actions */
    grid-template-columns: 1.5fr 1fr 1fr 0.5fr auto;
    align-items: center;
    gap: 16px;
}

.history-item:hover {
    border-color: var(--color-primary);
    box-shadow: var(--shadow-sm);
    background: var(--color-surface);
}

.history-info h4 {
    margin: 0;
    color: var(--color-text);
    font-size: 0.95rem;
    font-weight: 600;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.history-item p {
    margin: 0;
    font-size: 0.85rem;
    color: var(--color-text-muted);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.history-item p strong {
    color: var(--color-text);
    font-weight: 600;
    display: none;
    /* Hide labels in row view as columns provide context */
}

/* Specific styling for the generated date column to keep it readable */
.history-date {
    font-size: 0.8rem !important;
}

.history-actions {
    display: flex;
    gap: 6px;
    justify-content: flex-end;
}



.btn-history {
    padding: 6px 12px;
    font-size: 0.75rem;
    border-radius: var(--radius-sm);
    font-weight: 600;
}

.empty-history {
    grid-column: 1 / -1;
    text-align: center;
    padding: 40px;
    background: var(--color-bg);
    border: 2px dashed var(--color-border);
    border-radius: var(--radius-lg);
    color: var(--color-text-muted);
    font-style: italic;
}


/* ========================================
   2. BASE RESET & APP STRUCTURE
   Global layout rules and the sticky header
   containing the title and progress steps.
======================================== */
*,
*::before,
*::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

html,
body {
    height: 100%;
    font-family: var(--font-body);
    background: var(--color-bg);
    color: var(--color-text);
}

/* ========================================
   GLOBAL LAYOUT & NAVIGATION
   Styles for the main app shell, header,
   and progress indicators.
======================================== */
/* Main App Container Wrapper */
.app-container {
    /* Root wrapper for the whole app */
    height: 100vh;
    /* Fixed screen height */
    display: flex;
    /* Enables flexbox layout */
    flex-direction: column;
    /* Stacks header and main vertically */
    overflow: hidden;
    /* Prevents container-level scrolling */
}

/* Sticky Navigation Header */
.app-header {
    /* Top bar containing logo and steps */
    position: relative;
    /* No longer needs sticky since the parent doesn't scroll */
    z-index: 1000;
    /* Ensures it stays above content */
    flex-shrink: 0;
    /* Prevent header from being compressed */
    top: 0;
    padding: 10px 30px;
    /* Inner spacing for header content */
    background: var(--color-surface-glass);
    /* Frosted glass effect color */
    backdrop-filter: blur(12px);
    /* Blur effect for window behind header */
    -webkit-backdrop-filter: blur(12px);
    /* Safari support for blur */
    border-bottom: 1px solid var(--color-border);
    /* Bottom separator line */
    box-shadow: var(--shadow-sm);
    /* Subtle lift shadow */
    display: grid;
    /* Grid for logo, nav, and actions */
    grid-template-columns: 1fr auto 1fr;
    /* Defines 3 horizontal sections */
    align-items: center;
    /* Vertically centers header items */
    gap: 20px;
    /* Space between header sections */
}

.header-actions {
    display: flex;
    align-items: center;
    justify-content: flex-end;
    gap: 10px;
}

.app-title {
    font-family: var(--font-display);
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--color-text);
    display: flex;
    align-items: center;
    gap: 10px;
}

.app-title .icon {
    font-size: 1.8rem;
    display: inline-block;
    animation: sway 3s ease-in-out infinite;
    transform-origin: bottom center;
}

@keyframes sway {

    0%,
    100% {
        transform: rotate(-5deg);
    }

    50% {
        transform: rotate(5deg);
    }
}

.app-title span:last-child {
    color: var(--color-primary);
    background: rgba(79, 70, 229, 0.08);
    padding: 2px 8px;
    border-radius: 6px;
    font-size: 0.9rem;
    margin-left: 5px;
}

/* Wrapper for Progress Steps (1, 2, 3...) */
.progress-indicator {
    /* Navigation tabs for steps */
    display: flex;
    /* Flex layout for step buttons */
    justify-content: center;
    /* Centers buttons within the row */
    gap: 8px;
    /* Space between each step button */
    flex-wrap: nowrap;
    /* Prevents steps from breaking onto lines */
}

.progress-step {
    /* Individual step button style */
    padding: 8px 16px;
    /* Horizontal and vertical padding */
    font-size: 0.875rem;
    /* Standard small font size */
    font-weight: 500;
    /* Medium font weight */
    color: var(--color-text-muted);
    /* Default muted text color */
    background: var(--color-bg);
    /* Default gray background */
    border-radius: var(--radius-md);
    /* Rounded button corners */
    transition: all 0.2s;
    /* Smooth transition for hovers */
    cursor: pointer;
    /* Shows hand icon on hover */
}

.progress-step.active {
    /* Style for the currently active tab */
    background: linear-gradient(135deg, var(--color-primary), var(--color-accent));
    /* Indigo-to-purple gradient */
    color: #fff;
    /* White text for better contrast */
    box-shadow: var(--shadow-primary);
    /* Glow effect for active step */
    transform: scale(1.05);
    /* Slightly enlarges active step */
}

/* Main Content Area (Scrollable) */
.app-main {
    /* Area below the fixed header */
    flex: 1;
    /* Takes up all remaining screen space */
    padding: 40px;
    /* Generous inner spacing for content */
    display: flex;
    /* Centers the tab cards */
    justify-content: center;
    /* Horizontal centering */
    align-items: flex-start;
    /* Aligns cards to the top */
    overflow-y: auto;
    /* Enables scrollbar if content is too tall */
    height: 100%;
    /* Full height within the container */
    box-sizing: border-box;
    /* Includes padding in dimensions */
}

.tab-content {
    /* Shared style for all tab panels */
    display: none;
    /* Hidden by default */
    width: 100%;
    /* Takes full available width */
    max-width: 900px;
    /* Limits width for readability */
    animation: fadeIn 0.3s;
    /* Smooth appearance animation */
}

.tab-content.active {
    /* Style for the current tab only */
    display: block;
    /* Makes the active tab visible */
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(10px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* --- Tab Card --- */
/* Card Container for Tab Content */
.tab-card {
    /* Main white container for each tab */
    background: var(--color-surface);
    /* Solid white background */
    border-radius: var(--radius-lg);
    /* Large rounded corners */
    padding: 32px;
    /* Generous inner clear space */
    box-shadow: var(--shadow-lg);
    /* Deep floating shadow effect */
}

.tab-title {
    /* Main heading of the active tab */
    font-family: var(--font-display);
    /* Stylish heading typography */
    font-size: 1.75rem;
    /* Large legible size */
    font-weight: 600;
    /* Semi-bold appearance */
    margin-bottom: 8px;
    /* Space before the subtitle */
}

.tab-subtitle {
    color: var(--color-text-muted);
    margin-bottom: 24px;
}

/* --- Enhanced Login UI --- */
.login-wrapper {
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: calc(100vh - 200px);
}

.login-container {
    display: flex;
    background: var(--color-surface);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-lg);
    overflow: hidden;
    width: 100%;
    max-width: 900px;
    min-height: 550px;
}

.login-aside {
    flex: 1;
    background: linear-gradient(135deg, var(--color-primary), var(--color-accent));
    padding: 40px;
    display: flex;
    align-items: center;
    color: white;
}

.aside-content {
    max-width: 320px;
}

.aside-icon {
    font-size: 3rem;
    margin-bottom: 20px;
    align-items: center;
    justify-content: center;
}

.aside-title {
    font-size: 2rem;
    font-weight: 700;
    margin-bottom: 15px;
    line-height: 1.2;
}

.aside-text {
    font-size: 1rem;
    opacity: 0.9;
    line-height: 1.6;
    margin-bottom: 30px;
}

.feature-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
}

.feature-tags span {
    background: rgba(255, 255, 255, 0.2);
    padding: 6px 14px;
    border-radius: 20px;
    font-size: 0.85rem;
    font-weight: 500;
}

.login-main {
    flex: 1.2;
    padding: 40px;
    display: flex;
    flex-direction: column;
    justify-content: center;
}

.auth-box {
    animation: fadeIn 0.5s ease-out;
}

.auth-header {
    margin-bottom: 30px;
}

.auth-title {
    font-family: var(--font-display);
    font-size: 1.85rem;
    font-weight: 700;
    margin-bottom: 8px;
}

.auth-subtitle {
    color: var(--color-text-muted);
    font-size: 0.95rem;
}

.input-with-icon {
    position: relative;
    display: flex;
    align-items: center;
}

.input-with-icon .icon {
    position: absolute;
    left: 15px;
    font-size: 1.2rem;
    pointer-events: none;
}

.input-with-icon input {
    padding-left: 45px !important;
}

.auth-footer {
    margin-top: 30px;
    padding-top: 10px;
    border-top: 1px solid var(--color-border);
    text-align: center;
}

.auth-footer p {
    font-size: 0.85rem;
    color: var(--color-text-muted);
}

/* User Info Panel */
.user-avatar {
    font-size: 4rem;
    margin-bottom: 20px;
    text-align: center;
}

.user-email-display {
    font-size: 1.1rem;
    font-weight: 600;
    color: var(--color-primary);
    text-align: center;
}

.user-status-card {
    background: #f8fafc;
    border: 1px solid var(--color-border);
    border-radius: var(--radius-md);
    padding: 20px;
    margin-bottom: 30px;
}

.status-indicator {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 10px;
}

.dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    background: var(--color-success);
}

.pulse {
    animation: statusPulse 2s infinite;
}

@keyframes statusPulse {
    0% {
        box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.4);
    }

    70% {
        box-shadow: 0 0 0 10px rgba(16, 185, 129, 0);
    }

    100% {
        box-shadow: 0 0 0 0 rgba(16, 185, 129, 0);
    }
}

.status-meta {
    font-size: 0.9rem;
    color: var(--color-text-muted);
}

.status-meta span {
    font-weight: 600;
    color: var(--color-text);
}

/* Responsive Login */
@media (max-width: 850px) {
    .login-container {
        flex-direction: column;
        max-width: 450px;
    }

    .login-aside {
        display: none;
    }
}


.tab-header-flex {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: 20px;
    margin-bottom: 24px;
}

.tab-header-flex .tab-subtitle {
    margin-bottom: 0;
}

/* ========================================
   TAB 1: EXAM DETAILS - Functions Note
   This section controls the form layout 
   for setting up school name, class, 
   time duration, and total marks.
======================================== */
.form-grid {
    /* Grid layout for exam info inputs */
    display: grid;
    /* Enables CSS Grid */
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    /* Responsive columns */
    gap: 20px;
    /* Space between input fields */
}

.form-group {
    /* Wrapper for Label + Input pair */
    display: flex;
    /* Enables flex layout */
    flex-direction: column;
    /* Stacks label vertically above input */
}

.form-group label {
    /* Title text for input fields */
    font-size: 0.875rem;
    /* Small clear label font */
    font-weight: 500;
    /* Medium weight for readability */
    color: var(--color-text);
    /* High contrast text color */
    margin-bottom: 8px;
    /* Gap between label and box */
}

.form-group label .required {
    color: #ef4444;
    font-weight: 700;
}

.form-group input,
.form-group select {
    /* Styles for text boxes and dropdowns */
    padding: 12px 14px;
    /* comfortable typing space */
    font-size: 1rem;
    /* Standard readable font size */
    font-family: var(--font-body);
    /* Primary body font style */
    background: var(--color-bg);
    /* Light gray background color */
    border: 1px solid var(--color-border);
    /* Subtle separator line */
    border-radius: var(--radius-sm);
    /* Standard rounded corners */
    color: var(--color-text);
    /* Main text color for typing */
    outline: none;
    /* Removes default browser outline */
    transition: border-color 0.2s, box-shadow 0.2s;
    /* Smooth focus effects */
}

.form-group input:focus,
.form-group select:focus {
    /* Active state when clicking input */
    border-color: var(--color-primary);
    /* Highlights border with brand color */
    box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
    /* Glow effect around box */
}

/* --- Buttons --- */
.tab-actions {
    display: flex;
    justify-content: space-between;
    gap: 12px;
    flex-wrap: wrap;
}

.tab-actions:has(.btn:only-child) {
    justify-content: center;
}

.btn {
    /* Generic button class */
    padding: 14px 28px;
    /* Size of the button clickable area */
    font-size: 1.1rem;
    /* Large readable button text */
    font-weight: 600;
    /* Semi-bold text */
    font-family: var(--font-display);
    /* Heading font for buttons */
    border: none;
    /* Removes default borders */
    border-radius: var(--radius-md);
    /* Standard rounded corners */
    cursor: pointer;
    /* Hand cursor for interaction */
    transition: transform 0.15s, box-shadow 0.2s;
    /* Hover animations */
}

.btn:hover {
    /* Style when hovering with mouse */
    transform: translateY(-2px);
    /* Button lifts up slightly */
}

.btn:active {
    /* Style when clicking down */
    transform: translateY(0);
    /* Button resets to original position */
}

.btn-primary {
    /* Main action button style */
    background: linear-gradient(135deg, var(--color-primary), var(--color-accent));
    /* Gradient background */
    color: #fff;
    /* White legible text */
    box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3);
    /* Subtle blue shadow */
}

.btn-lg {
    padding: 14px 28px;
    font-size: 1.1rem;
}

.btn-outline-danger {
    background: transparent;
    border: 2px solid #ef4444;
    color: #ef4444;
}

.btn-outline-danger:hover {
    background: #ef4444;
    color: #fff;
}


.btn-primary:hover {
    /* Hover over main button */
    box-shadow: 0 6px 16px rgba(99, 102, 241, 0.4);
    /* Stronger shadow on hover */
}

.btn-success {
    /* Success action button style (e.g. Save PDF) */
    background: linear-gradient(135deg, var(--color-success), var(--color-success-light));
    /* Green gradient background */
    color: #fff;
    /* White legible text */
    box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
    /* Subtle green shadow */
}

.btn-success:hover {
    /* Hover over success button */
    box-shadow: 0 6px 16px rgba(16, 185, 129, 0.4);
    /* Stronger shadow on hover */
}

.btn-secondary {
    background: var(--color-bg);
    border: 2px solid var(--color-border);
    color: var(--color-text);
}

.btn-sm {
    padding: 8px 16px;
    font-size: 0.875rem;
}

.btn-outline {
    background: transparent;
    border: 2px solid var(--color-primary);
    color: var(--color-primary);
}

.btn-outline:hover {
    background: var(--color-primary);
    color: #fff;
}

/* --- Icon Buttons --- */
.btn-icon {
    /* Circular icon-only button */
    display: flex;
    /* Enables centering the icon */
    align-items: center;
    /* Vertically centers icon */
    justify-content: center;
    /* Horizontally centers icon */
    width: 38px;
    /* Fixed width for perfect circle */
    height: 38px;
    /* Fixed height matches width */
    border-radius: 50%;
    /* Makes the box a circle */
    border: none;
    /* No outer line */
    cursor: pointer;
    /* Click indication cursor */
    font-size: 1.15rem;
    /* Size of the icon graphic */
    transition: all 0.2s;
    /* Smooth hover effects */
    padding: 0;
    /* Removes internal padding */
    background: #f1f5f9;
    /* Light bluish gray background */
    color: var(--color-text);
    /* Dark color for the icon */
    aspect-ratio: 1/1;
    /* Force 1:1 square ratio */
    flex-shrink: 0;
    /* Prevents icon from squishing */
}

.btn-icon:hover {
    transform: scale(1.1);
}

.btn-icon.primary {
    background: var(--color-primary);
    color: white;
}

.btn-icon.danger {
    background: #fee2e2;
    color: #ef4444;
}

.btn-icon.stats {
    background: #e0e7ff;
    color: var(--color-primary);
}

/* ========================================
   TAB 2: CHAPTER SELECTION - Functions Note
   Styles for the grid of checkboxes that 
   allow users to choose which chapters 
   will be included in the question bank.
======================================== */
.chapter-grid {
    /* Grid for the chapter selection screen */
    display: grid;
    /* Enables grid item placement */
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    /* Auto columns */
    gap: 16px;
    /* Standard spacing between cards */
    margin-bottom: 32px;
    /* Outer gap below the whole grid */
}

.chapter-item {
    /* Style for each chapter card */
    display: flex;
    /* Aligns checkbox and title side-by-side */
    align-items: center;
    /* Vertically centers icon and text */
    padding: 16px;
    /* Internal spacing within card */
    background: var(--color-bg);
    /* Secondary light background color */
    border: 2px solid var(--color-border);
    /* Subtle line around the card */
    border-radius: var(--radius-md);
    /* Rounded corner style */
    cursor: pointer;
    /* Show interaction possible */
    transition: all 0.2s;
    /* Smooth visual transitions */
    user-select: none;
    /* Prevents accidental text selection */
}

/* Hover effect for chapter cards */
.chapter-item:hover {
    border-color: var(--color-primary);
    background: rgba(99, 102, 241, 0.05);
}

/* Styling for the checkbox input itself */
.chapter-item input[type="checkbox"] {
    width: 20px;
    height: 20px;
    margin-right: 12px;
    cursor: pointer;
}

/* Label text for chapter items */
.chapter-item label {
    font-weight: 500;
    cursor: pointer;
    flex: 1;
}

/* --- Question Selector --- */
.section-group {
    /* Grouping for section categories */
    margin-bottom: 32px;
    /* Space between groups */
    padding: 20px;
    /* Inner comfort space */
    background: var(--color-bg);
    /* Light gray area color */
    border-radius: var(--radius-md);
    /* Curved edges for the group */
}

.section-group h3 {
    /* Subsection headings within bank */
    font-size: 1.125rem;
    /* Medium heading size */
    margin-bottom: 16px;
    /* Spacing before list below */
    color: var(--color-primary);
    /* Indigo branding color */
}

.question-selector {
    /* List area for choosing questions */
    display: flex;
    /* Column stacking of questions */
    flex-direction: column;
    /* Vertical layout */
    gap: 12px;
    /* Spacing between individual selectors */
}

/* ========================================
   TAB 4: QUESTION SELECTION - Functions Note
   Styles for the question bank list, filtering 
   by difficulty/source, and the sidebar tabs 
   for different sections (sub-tabs).
======================================== */
.section-tabs {
    /* Sidebar sub-navigation for Part selections */
    display: flex;
    /* Row of buttons */
    gap: 8px;
    /* Space between buttons */
    margin-bottom: 24px;
    /* Outer gap below the tab bar */
    flex-wrap: wrap;
    /* Wraps to new line if screen is narrow */
}

.section-tab {
    /* Individual button in the sub-nav */
    padding: 10px 20px;
    /* Size of the tab button */
    font-size: 0.95rem;
    /* Clear readable size */
    font-weight: 500;
    /* Semi-bold text style */
    background: var(--color-bg);
    /* Non-active background color */
    border: 2px solid var(--color-border);
    /* Subtle border color */
    border-radius: var(--radius-md);
    /* Rounded tab corners */
    cursor: pointer;
    /* Show click is possible */
    transition: all 0.2s;
    /* Hover animations */
}

/* Hover state for section tabs */
.section-tab:hover {
    border-color: var(--color-primary);
    background: rgba(99, 102, 241, 0.1);
}

/* Active state for the selected section tab */
.section-tab.active {
    background: linear-gradient(135deg, var(--color-primary), var(--color-accent));
    color: #fff;
    border-color: var(--color-primary);
}

/* --- Question Selection Area --- */
.question-selection-area {
    min-height: 300px;
}

.section-question-panel {
    background: var(--color-bg);
    padding: 20px;
    border-radius: var(--radius-md);
}

.question-filters {
    padding: 16px;
    background: var(--color-surface);
    border-radius: var(--radius-sm);
    margin-bottom: 20px;
}

.filter-row {
    /* Horizontal container for filter dropdowns */
    display: flex;
    /* Side-by-side alignment */
    gap: 20px;
    /* Space between filter groups */
    align-items: center;
    /* Vertically centers dropdowns */
    flex-wrap: wrap;
    /* Wraps on mobile screens */
}

.filter-group {
    /* Individual filter with label */
    display: flex;
    /* Aligns text label and select box */
    align-items: center;
    /* Vertical centering */
    gap: 8px;
    /* Minor gap between label and box */
}

.filter-group select {
    /* Styles the dropdown elements */
    padding: 6px 12px;
    /* Inner typing/selection space */
    border: 1px solid var(--color-border);
    /* Subtle separator line */
    border-radius: var(--radius-sm);
    /* Standard corner rounding */
}

.checkbox-group label {
    /* Text styling for filter checkboxes */
    display: flex;
    /* Aligns icon and text */
    align-items: center;
    /* Vertical centering */
    gap: 6px;
    /* Gap between box and text */
    cursor: pointer;
    /* Suggest interaction */
    font-size: 0.9rem;
    /* Small clear text */
}

.question-list-container {
    /* Scrolling container for the bank */
    max-height: 500px;
    /* Limits bank height for workspace */
    overflow-y: auto;
    /* Enables vertical scrolling */
    margin-bottom: 20px;
    /* Space below the list area */
    border: 1px solid var(--color-border);
    /* Outer line around the bank */
    border-radius: var(--radius-sm);
    /* Slightly curved corners */
}

/* Layout for the list of questions */
.question-list {
    display: flex;
    flex-direction: column;
}

/* Individual question item container */
.question-item {
    display: flex;
    gap: 12px;
    padding: 12px 16px;
    border-bottom: 1px solid var(--color-border);
    cursor: pointer;
    transition: background 0.2s;
}

.question-item:last-child {
    border-bottom: none;
}

.question-item:hover {
    background: var(--color-surface);
}

/* Highlight style for selected question item */
.question-item.selected {
    background: rgba(99, 102, 241, 0.05);
    /* faint primary color */
    border-left: 3px solid var(--color-primary);
}

/* Container for question text content */
.question-content {
    flex: 1;
}

/* Styling for the question text itself */
.q-text {
    margin-bottom: 6px;
    font-size: 0.95rem;
    line-height: 1.5;
}

.q-tags {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
}

.tag {
    font-size: 0.75rem;
    padding: 2px 8px;
    border-radius: 12px;
    font-weight: 500;
}

.tag-blue {
    background: #dbeafe;
    color: #1e40af;
}

.tag-orange {
    background: #ffedd5;
    color: #9a3412;
}

.tag-gray {
    background: #f3f4f6;
    color: #4b5563;
}

.section-header-panel {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    border-bottom: 2px solid var(--color-border);
    padding-bottom: 16px;
    margin-bottom: 20px;
}

.section-info {
    border-bottom: none;
    margin-bottom: 0;
    padding-bottom: 0;
}

.no-questions {
    color: var(--color-text-muted);
    font-style: italic;
    text-align: center;
}

/* ========================================
   TAB 3: SECTION BUILDER - Functions Note
   Styles for configuring Parts (Part A, B, etc.),
   setting marks per question, and choosing 
   how many questions to attempt.
======================================== */
.section-card {
    /* Config card for a paper part (e.g. Part A) */
    background: var(--color-bg);
    /* Light color for card area */
    border: 2px solid var(--color-border);
    /* Separator line around Part config */
    border-radius: var(--radius-md);
    /* Smooth card corner style */
    padding: 20px;
    padding-left: 45px;
    /* Space for drag handle */
    /* Inner comfort spacing */
    margin-bottom: 16px;
    /* Space between different Parts */
    position: relative;
    /* Anchor for the remove button */
    transition: all 0.2s;
}

.section-card.dragging {
    opacity: 0.5;
    transform: scale(0.98);
    border-style: dashed;
    border-color: var(--color-primary);
}

.section-drag-handle {
    position: absolute;
    left: 12px;
    top: 50%;
    transform: translateY(-50%);
    cursor: grab;
    color: var(--color-text-muted);
    font-size: 20px;
    padding: 10px 5px;
    display: flex;
    align-items: center;
    justify-content: center;
    user-select: none;
}

.section-drag-handle:active {
    cursor: grabbing;
}


.section-header-row {
    display: flex;
    /* Top row containing Part Title and Total Marks */
    justify-content: space-between;
    align-items: center;
    margin-bottom: 16px;
    padding-bottom: 12px;
    border-bottom: 2px solid var(--color-border);
}

.section-number {
    font-size: 1.25rem;
    font-weight: 600;
    color: var(--color-primary);
}

/* Main container for section marks input */
.section-marks {
    font-size: 1rem;
    font-weight: 600;
    color: #000;
    margin-right: 50px;
    /* Add space to avoid remove button */
}

.remove-section-btn {
    /* Red button to delete a Part */
    position: absolute;
    /* Fixed position within the card */
    top: 10px;
    /* Pushed to the top edge */
    right: 10px;
    /* Pushed to the right edge */
    background: #ef4444;
    /* Danger red color */
    color: #fff;
    /* White contrast icon */
    border: none;
    /* No outer border line */
    border-radius: 50%;
    /* Perfect circle shape */
    width: 32px;
    /* Equal width for circle */
    height: 32px;
    /* Equal height for circle */
    cursor: pointer;
    /* Click indication cursor */
    font-size: 18px;
    /* Size of the 'X' symbol */
    line-height: 1;
    /* Centers 'X' vertically */
    transition: all 0.2s;
    /* Smooth hover animation */
}

/* Hover effect for the delete button */
.remove-section-btn:hover {
    background: #dc2626;
    transform: scale(1.1);
}

/* Grid for section configuration inputs */
.section-config {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 16px;
}

/* Wrapper for individual configuration field */
.config-field {
    display: flex;
    flex-direction: column;
}

/* Label styling for configuration fields */
.config-field label {
    font-size: 0.875rem;
    font-weight: 500;
    margin-bottom: 6px;
    color: var(--color-text);
}

/* Input fields inside configuration section */
.config-field select,
.config-field input {
    padding: 10px 12px;
    font-size: 0.95rem;
    background: var(--color-surface);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-sm);
    outline: none;
    transition: border-color 0.2s;
}

.config-field select:focus,
.config-field input:focus {
    border-color: var(--color-primary);
}

/* Large display for total marks calculation */
.total-marks-display {
    text-align: center;
    padding: 16px;
    background: linear-gradient(135deg, var(--color-primary), var(--color-accent));
    color: #fff;
    border-radius: var(--radius-md);
    font-size: 1.25rem;
    margin-bottom: 20px;
}

/* ========================================
   TAB 5: PREVIEW & TOOLS - Functions Note
   Styles for the final question paper layout, 
   MS Word formatting toolbar, and the 
   A4-sized paper simulation.
======================================== */
.preview-container {
    width: 100%;
    max-width: 210mm;
    margin: 0 auto;
}

.preview-actions {
    /* MS Word style formatting toolbar - Unified Sticky */
    position: sticky;
    top: -40px;
    /* Offset exactly to match the .app-main padding-top */
    z-index: 100;
    /* Ensures it stays above paper content */
    background: #ffffff;
    display: flex;
    justify-content: center;
    align-items: stretch;
    gap: 0;
    margin-bottom: 25px;
    padding: 10px;
    background: #ffffff;
    /* Solid white for a clean unified look with the header */
    border: 1px solid var(--color-border);
    border-top: none;
    /* Remove top border to "connect" with header visually if close enough */
    border-radius: 0 0 var(--radius-md) var(--radius-md);
    /* Only round bottom corners for a "pendant" look */
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
    /* Soft shadow to separate from paper */
    overflow-x: auto;
}

/* Optional: remove margin-top from first group to align better */
.preview-actions .toolbar-group:first-child {
    padding-left: 0;
}

/* Vertical column of tool buttons */
.toolbar-group {
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    padding: 0 8px;
    border-right: 1px solid #d1d5db;
    min-height: auto;
}

.toolbar-group:last-child {
    border-right: none;
}

/* Horizontal row of tool buttons within a group */
.toolbar-row {
    display: flex;
    align-items: center;
    gap: 1px;
    margin-bottom: 2px;
}

.toolbar-row:last-child {
    margin-bottom: 0;
}

/* Text labels under tool groups */
.toolbar-label {
    font-size: 0.65rem;
    font-weight: 700;
    text-transform: uppercase;
    color: #6b7280;
    text-align: center;
    letter-spacing: 0.03em;
    margin-top: 5px;
}

/* Tool Buttons & Inputs */
/* Base style for individual tool icons/buttons */
.tool-btn {
    /* Single formatting button (Bold/Italic) */
    width: 26px;
    /* Small standard button width */
    height: 26px;
    /* Small standard button height */
    display: flex;
    /* Enables centering the tool icon */
    align-items: center;
    /* Vertically centers icon */
    justify-content: center;
    /* Horizontally centers icon */
    background: transparent;
    /* No background by default */
    border: 1px solid transparent;
    /* No border until hovered or active */
    border-radius: 4px;
    /* Tiny rounded button corners */
    cursor: pointer;
    /* Click indication pointer */
    font-weight: 500;
    /* Standard tool label weight */
    font-size: 0.85rem;
    /* Standard tool icon scale */
    color: #374151;
    /* Dark gray tool color */
    transition: all 0.1s;
    /* Very fast hover reaction */
}

.tool-btn:hover {
    background: #e5e7eb;
    border-color: #9ca3af;
}

/* Active state for toggle buttons (Bold, Italic, etc.) */
.tool-btn.active {
    background: #dbeafe;
    border-color: #3b82f6;
    color: #1d4ed8;
}

.tool-btn.bold-btn {
    font-weight: 800;
    font-size: 1rem;
}

.tool-btn.italic-btn {
    font-style: italic;
}

.tool-btn.underline-btn {
    text-decoration: underline;
}

/* Input fields in the toolbar (Font size, Color) */
.tool-select {
    padding: 2px 4px;
    height: 26px;
    border: 1px solid #cbd5e1;
    border-radius: 4px;
    background: white;
    font-family: inherit;
    font-size: 0.85rem;
    color: #334155;
    outline: none;
}

.tool-select:focus {
    border-color: #3b82f6;
}

.tool-color-wrapper {
    position: relative;
    display: flex;
    flex-direction: column;
    align-items: center;
}

.tool-color-input {
    position: absolute;
    opacity: 0;
    width: 100%;
    height: 100%;
    cursor: pointer;
}

.tool-color-label {
    font-size: 0.7rem;
    font-weight: bold;
    margin-top: -2px;
}

.tool-size-display {
    min-width: 25px;
    text-align: center;
    font-weight: 600;
    font-size: 0.85rem;
}


/* ========================================
   8. PAPER & QUESTION SIMULATION
   Styles that mimic a real printed page
   and provide the "Straight Alignment" fix.
======================================== */
.paper {
    /* Simulated physical paper sheet */
    width: 210mm;
    /* Standard A4 paper width */
    min-height: 297mm;
    /* Standard A4 paper height */
    height: auto;
    /* Grows if content exceeds one page */
    background: #fff;
    /* Paper white color */
    color: #111;
    /* Dark ink-black text */
    margin: 0 auto;
    /* horizontal centering on screen */
    padding: 15mm 15mm 15mm 15mm;
    /* Standard printing margins */
    border-radius: var(--radius-lg);
    /* visual padding on screen only */
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.2);
    /* Floating paper effect */
    box-sizing: border-box;
    /* Ensures padding doesn't increase width */
    font-family: 'Times New Roman', Times, serif;
    /* Professional academic font */
    font-size: 12pt;
    /* Standard document text size */
    line-height: 1.6;
    /* Vertical spacing for readability */
    overflow-y: visible;
    /* Prevents content clipping */
    word-wrap: break-word;
    /* Breaks long text to next line */
}

/* Main header block of the question paper */
.paper-header {
    text-align: center;
    margin-bottom: 10px;
    border-bottom: 2px solid #333;
    padding-bottom: 15px;
    line-height: 1;
}

/* Exam Name Title (e.g. "Biology") */
.exam-title {
    font-size: 18pt;
    font-weight: bold;
    text-transform: uppercase;
    letter-spacing: 2px;
    margin-bottom: 5px;
}

/* Meta information row (Class, Time, Marks) */
.paper-meta {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 11pt;
    margin-bottom: 2px;
}

.paper-header p {
    margin: 0.5px;
}

.meta-left,
.meta-right {
    text-align: left;
}

.meta-right {
    text-align: right;
}

.meta-center h2 {
    /* Center subheading (e.g. "PART-I") */
    font-size: 12pt;
    /* Slightly larger meta text */
    font-weight: bold;
    /* Bold emphasis */
    text-transform: uppercase;
    /* Uppercase styling */
    margin: 0;
    /* Resets default margins */
}

.paper-content {
    margin-top: 20px;
}

/* Section styles from previous CSS */
.section {
    margin-bottom: 25px;
}

/* Header for each Part/Section (Part A) */
.section-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: #f0f0f0;
    padding: 8px 12px;
    margin-bottom: 12px;
    border-left: 4px solid #333;
}

.section-title {
    font-weight: bold;
    font-size: 13.5pt;
}

.section-marks {
    font-size: 10pt;
    font-weight: bold;
    color: #000;
}

.section-note {
    font-size: 10pt;
    font-style: italic;
    margin-bottom: 12px;
    color: #444;
}

.compulsory-header-notice {
    color: #ef4444;
    font-weight: 700;
    font-size: 10pt;
    margin-left: 10px;
}

/* --- Question Paper Components --- */

/* Main container for a single question block */
.question {
    /* Container for number + text + options */
    display: flex;
    /* Aligns number to the left of text */
    align-items: flex-start;
    /* Top alignment of both columns */
    margin-bottom: 12px;
    /* Gap between consecutive questions */
    width: 100%;
    /* Spans full width of paper */
}

/* Container for the Question Number label (1.) */
.question-number {
    /* Style for the question index (e.g. 1.) */
    font-weight: bold;
    /* Bold question index */
    width: 35px;
    /* Fixed column width for index */
    min-width: 35px;
    /* Prevents shrinking behavior */
    flex-shrink: 0;
    /* Stable layout for numbers */
    line-height: 1.6;
    /* Matches question text spacing */
    text-align: left;
    /* Left-aligned inside its column */
}

/* Wrapper for the question text and options */
.question-content {
    /* Area hosting text and options */
    flex: 1;
    /* Fills remaining width after number */
    min-width: 0;
    /* Responsive grid fix */
    line-height: 1.6;
    /* Standard line spacing */
}

/* Actual text of the question */
.question-text {
    /* Main question body text area */
    display: block;
    white-space: pre-wrap;
    /* Preserves breaks for editing and equations */
}

.options {
    margin-left: 25px;
    margin-top: 5px;
    display: flex;
    flex-direction: column;
    gap: 3px;
    align-items: flex-start;
}

/* Container for inline options (a) ... (b) ... */
.options-inline {
    /* Row layout for short MCQs */
    margin-left: 0;
    /* No margin for grid layout */
    margin-top: 8px;
    /* Minor space above options */
    display: grid;
    /* Base grid setup */
    gap: 5px 15px;
    /* Grid row and column spacing */
    width: 100%;
}

/* Specific Layout Variations */
.options-inline.cols-4 {
    grid-template-columns: repeat(4, 1fr);
}

.options-inline.cols-2 {
    grid-template-columns: repeat(2, 1fr);
}

.options-inline.cols-1 {
    grid-template-columns: 1fr;
}

/* Default fallback if no class specified */
.options-inline:not([class*="cols-"]) {
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
}

/* Ensure new lines (divs/br) behave correctly in editable mode */
.options-inline>div,
.options-inline br {
    display: none;
    /* Hide manual breaks in Grid, let Grid handle flow */
}

.options-inline .option {
    display: block;
    margin: 0;
    line-height: 1.4;
    white-space: pre-wrap;
    /* Preserves breaks for multi-line equations in options */
}

/* Table for Match the Following questions */
.match-table {
    width: auto;
    min-width: 50%;
    border-collapse: collapse;
    margin: 5px 0 10px 25px;
    font-size: 11pt;
}

.match-table th,
.match-table td {
    border: 1px solid #999;
    padding: 3px 8px;
    text-align: left;
}

.match-table th {
    background: #e8e8e8;
}

.assertion-block {
    margin-left: 25px;
    margin-top: 5px;
    font-size: 11pt;
}

.assertion-block p {
    margin-bottom: 4px;
}

.or-divider {
    text-align: center;
    font-weight: bold;
    margin: 10px 0;
    font-size: 10pt;
}

.sub-question {
    margin-left: 25px;
    margin-bottom: 8px;
}

.compulsory-tag {
    background: #ef4444;
    color: #fff;
    font-size: 8pt;
    padding: 2px 6px;
    border-radius: 3px;
    margin-left: 8px;
    font-weight: bold;
    text-transform: uppercase;
}

.compulsory-header-notice {
    color: #ef4444;
    font-weight: bold;
    font-size: 10pt;
    margin-left: 10px;
}



/* ========================================
   11. PRINT OPTIMIZATION
   Specific rules triggered by the browser's 
   print engine to ensure high-quality output.
======================================== */



/* ========================================
   9. INTERACTIVE CARDS & SLOTS
   Feedback for drag-and-drop operations
   and highlighting selected question placeholders.
======================================== */
.q-card {
    /* Single question slot container */
    display: flex;
    /* Aligns handle, number, and text */
    align-items: stretch;
    /* Forces children to match card height */
    background: var(--color-surface);
    /* White card background */
    border: 1px solid var(--color-border);
    /* Subtle line around the slot */
    border-radius: var(--radius-md);
    /* Smooth card outer corners */
    overflow: visible;
    /* Allows tags to pop outside */
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    /* Smooth movement feel */
    position: relative;
    /* Anchor for action buttons */
}

.q-card:hover {
    border-color: var(--color-primary-light);
    box-shadow: var(--shadow-md);
    transform: translateY(-2px);
}

.q-handle {
    /* Drag handler for reordering */
    display: flex;
    /* Centering the drag icon */
    align-items: center;
    /* Vertical centering */
    justify-content: center;
    /* Horizontal centering */
    padding: 0 10px;
    /* Clickable handle width */
    background: transparent;
    /* Invisible background default */
    cursor: grab;
    /* Hand icon for dragging */
    color: var(--color-text-muted);
    /* Subtle color for the icon */
    font-size: 1.5rem;
    /* Size of the handle dots */
    font-weight: bold;
    /* Emphasis on the handle icon */
    border-right: 1px solid transparent;
    /* Hidden line until active */
    transition: all 0.2s;
    /* Fast interaction feedback */
    user-select: none;
    /* Prevents highlighting dots */
}

.q-handle:hover {
    color: var(--color-primary);
    background: rgba(79, 70, 229, 0.05);
}

.q-card:active .q-handle {
    cursor: grabbing;
}

.q-num-panel {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-width: 70px;
    padding: 10px;
    background: #f8fafc;
    border-right: 1px solid var(--color-border);
}

.q-num-panel .q-num {
    font-family: var(--font-display);
    font-weight: 800;
    font-size: 1rem;
    color: var(--color-primary);
}

.q-num-panel .q-badge-mini {
    font-size: 0.65rem;
    font-weight: 800;
    padding: 2px 5px;
    border-radius: 4px;
    margin-top: 5px;
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.q-main {
    flex: 1;
    padding: 16px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    gap: 4px;
}


.q-text-panel {
    flex: 1;
    padding: 16px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    gap: 4px;
}

.q-card .q-text {
    /* Main question text in the slot */
    font-size: 1rem;
    /* Clear reading size */
    font-weight: 500;
    /* Slightly thicker for clarity */
    color: var(--color-text);
    /* High contrast text color */
    line-height: 1.5;
    /* Comfortable reading flow */
}

.dragging {
    opacity: 0.5;
    border: 2px dashed var(--color-primary) !important;
    transform: scale(0.98);
}

.filled-slot {
    border-left: 4px solid var(--color-primary);
}

.placeholder-slot {
    border: 1px dashed var(--color-border);
    justify-content: center;
    padding: 24px;
    background: rgba(248, 250, 252, 0.5);
    cursor: pointer;
}

.placeholder-slot:hover {
    background: white;
    border-style: solid;
    border-color: var(--color-primary-light);
}

.placeholder-slot .q-content {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
}

.active-selection-slot {
    border: 2px solid var(--color-primary) !important;
    background: #fff !important;
    box-shadow: var(--shadow-lg);
    z-index: 10;
}

.q-actions {
    display: flex;
    align-items: center;
    gap: 5px;
    padding: 0 16px;
    background: #fcfcfc;
}

.qm-header-title {
    display: flex;
    align-items: center;
    gap: 12px;
}

/* ========================================
   10. MODALS & RESPONSIVE DESIGN
   Popup windows for importing/exporting 
   and mobile compatibility rules.
======================================== */
@media (max-width: 768px) {
    .app-main {
        padding: 20px;
    }

    .tab-card {
        padding: 20px;
    }

    .form-grid {
        grid-template-columns: 1fr;
    }

    .chapter-grid {
        grid-template-columns: 1fr;
    }

    .tab-actions {
        flex-direction: column;
    }

    .btn {
        width: 100%;
    }
}

/* --- Import Modal --- */
.modal-overlay {
    /* Dimmed background behind popup */
    position: fixed;
    /* Stays pinned to the window */
    top: 0;
    /* Aligns to top edge */
    left: 0;
    /* Aligns to left edge */
    right: 0;
    /* Aligns to right edge */
    bottom: 0;
    /* Aligns to bottom edge */
    background: rgba(0, 0, 0, 0.5);
    /* Semi-transparent black */
    backdrop-filter: blur(4px);
    /* Blurs the main app behind */
    display: flex;
    /* Enables centering the modal */
    justify-content: center;
    /* Horizontal centering */
    align-items: center;
    /* Vertical centering */
    z-index: 1000;
    /* High priority above all else */
    animation: fadeIn 0.2s;
    /* Quick appearance animation */
}

.modal-container {
    /* The actual interactive popup box */
    background: #fff;
    /* Solid white modal area */
    width: 90%;
    /* Responsive width on mobile */
    max-width: 600px;
    /* Limits modal scale on desktop */
    border-radius: var(--radius-lg);
    /* Large rounded modal edges */
    box-shadow: var(--shadow-xl, 0 25px 50px -12px rgba(0, 0, 0, 0.25));
    /* Heavy modal shadow */
    display: flex;
    /* Content stacks vertically */
    flex-direction: column;
    /* Stack header, body, footer */
    animation: slideUp 0.3s cubic-bezier(0.16, 1, 0.3, 1);
    /* Professional slide entry */
}

@keyframes slideUp {
    from {
        transform: translateY(20px);
        opacity: 0;
    }

    to {
        transform: translateY(0);
        opacity: 1;
    }
}

.modal-header {
    padding: 20px 24px;
    border-bottom: 1px solid var(--color-border);
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.modal-header h3 {
    margin: 0;
    color: var(--color-primary);
    font-size: 1.25rem;
}

.modal-body {
    padding: 24px;
    display: flex;
    flex-direction: column;
    gap: 20px;
}

.modal-footer {
    padding: 20px 24px;
    background: #f8fafc;
    border-top: 1px solid var(--color-border);
    border-bottom-left-radius: var(--radius-lg);
    border-bottom-right-radius: var(--radius-lg);
    display: flex;
    justify-content: flex-end;
    gap: 12px;
}

.btn-import {
    background: linear-gradient(135deg, #10b981, #059669);
    color: white;
    box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
}

.btn-import:hover {
    box-shadow: 0 6px 16px rgba(16, 185, 129, 0.4);
}

/* Inline Bank Empty State */
.bank-no-results {
    padding: 60px 40px;
    text-align: center;
    color: var(--color-text-muted);
    font-style: italic;
    background: #fdfdfd;
    border: 1px dashed #e2e8f0;
    border-radius: var(--radius-md);
    margin: 20px;
    font-size: 0.95rem;
}

.bank-chapter-header {
    margin-top: 25px !important;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03) !important;
}

/* Registration Number Table/Boxes */
.reg-no-wrapper {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-top: -10px;
    /* Adjusting to fit top right alignment */
}

.reg-no-label {
    font-size: 10pt;
    font-weight: bold;
    font-family: 'Times New Roman', serif;
}

.reg-no-grid {
    display: flex;
    border: 1.5px solid #000;
}

.reg-no-box {
    width: 20px;
    height: 25px;
    border: 0.5px solid #000;
    background: transparent;
}

/*Footer Actions*/
.preview-footer-actions {
    width: 100%;
    max-width: 210mm;
    margin: 20px auto;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0 10px;
}

/* Image Selection & Resizing */
.resizable-img {
    cursor: move;
}

.resizable-img.selected {
    outline: 2px solid var(--color-primary);
}

/* Overlay Manager */
#image-tools-overlay {
    position: absolute;
    border: 1px dashed var(--color-primary);
    pointer-events: none;
    /* Let events pass to paper for selection, but handles intercept */
    z-index: 1000;
    display: none;
    box-shadow: 0 0 0 10000px rgba(0, 0, 0, 0);
    /* Invisible large shadow to catch clicks outside? No. */
}

.resize-handle {
    position: absolute;
    width: 10px;
    height: 10px;
    background: white;
    border: 1px solid var(--color-primary);
    pointer-events: auto;
    z-index: 1001;
}

.resize-handle.nw {
    top: -5px;
    left: -5px;
    cursor: nw-resize;
}

.resize-handle.ne {
    top: -5px;
    right: -5px;
    cursor: ne-resize;
}

.resize-handle.sw {
    bottom: -5px;
    left: -5px;
    cursor: sw-resize;
}

.resize-handle.se {
    bottom: -5px;
    right: -5px;
    cursor: se-resize;
}

.remove-btn-img {
    position: absolute;
    top: -30px;
    right: 0;
    background: #ef4444;
    color: white;
    border: none;
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 0.8rem;
    cursor: pointer;
    pointer-events: auto;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
}

.paper {
    position: relative;
    /* Context for absolute items */
}

/* --- Modal Styles --- */
.modal-overlay {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    z-index: 1000;
    justify-content: center;
    align-items: center;
}

.modal-content {
    background: white;
    padding: 20px;
    border-radius: 8px;
    width: 400px;
    max-width: 90%;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
    position: relative;
    max-height: 80vh;
    overflow-y: auto;
}

.modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: 1px solid #ddd;
    padding-bottom: 10px;
    margin-bottom: 15px;
}

.modal-title {
    font-size: 18px;
    font-weight: bold;
    color: #333;
}

.close-modal-btn {
    background: none;
    border: none;
    font-size: 24px;
    cursor: pointer;
    color: #666;
}

.close-modal-btn:hover {
    color: #f00;
}

/* --- Symbol Grid --- */
.symbol-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(40px, 1fr));
    gap: 10px;
}

.symbol-btn {
    /* Button for inserting math symbols */
    width: 100%;
    /* Fills grid cell */
    height: 40px;
    /* Standard tap target height */
    font-size: 18px;
    /* Visible math symbol scale */
    border: 1px solid #ccc;
    /* Light border for the button */
    background: #f9f9f9;
    /* Light background color */
    border-radius: 4px;
    /* Softened button corners */
    cursor: pointer;
    /* Click indication */
    display: flex;
    /* Enables symbol centering */
    align-items: center;
    /* Vertical centering */
    justify-content: center;
    /* Horizontal centering */
}

.symbol-btn:hover {
    background: #e0e0e0;
    border-color: #999;
}

/* --- Equation List --- */
.equation-list {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.equation-option {
    /* Item in the equation template list */
    display: flex;
    /* Aligns preview and label */
    align-items: center;
    /* Vertical centering */
    padding: 10px;
    /* Inner comfort space */
    border: 1px solid #ddd;
    /* Subtle separator line */
    border-radius: 4px;
    /* Card-like rounded corners */
    cursor: pointer;
    /* Interaction pointer */
    background: #fff;
    /* Default white background */
    transition: background 0.2s;
    /* Smooth selection effect */
}

.equation-option:hover {
    background: #f0f8ff;
    border-color: #007bff;
}

.equation-preview {
    font-family: 'Times New Roman', Times, serif;
    font-size: 1.2em;
    margin-right: 15px;
    min-width: 60px;
    text-align: center;
}

.equation-label {
    font-size: 14px;
    color: #333;
}

/* --- Rendered Equation Styles --- */
.mq-fraction {
    display: inline-block;
    vertical-align: middle;
    text-align: center;
    margin: 0 5px;
}

.mq-numerator {
    display: inline-block;
    border-bottom: 1px solid black;
    padding: 0 2px;
}

.mq-denominator {
    display: block;
    padding: 0 2px;
}

.mq-sqrt {
    display: inline-block;
}

.mq-sqrt-symbol {
    /* The  symbol */
    font-size: 1.2em;
}

.mq-sqrt-content {
    border-top: 1px solid black;
    padding-top: 2px;
    display: inline-block;
}

/* --- Equation Form Styles --- */
.equation-form-container {
    border-top: 1px solid #eee;
    margin-top: 15px;
    padding-top: 15px;
}

.equation-input-group {
    margin-bottom: 10px;
}

.equation-input-group label {
    display: block;
    font-size: 12px;
    color: #666;
    margin-bottom: 4px;
}

.equation-input-group input {
    width: 100%;
    padding: 8px;
    border: 1px solid #ccc;
    border-radius: 4px;
}

.equation-live-preview-box {
    margin: 15px 0;
    padding: 10px;
    border: 1px dashed #ccc;
    background: #fdfdfd;
    text-align: center;
    min-height: 50px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: 'Times New Roman', serif;
    font-size: 1.5em;
}

.eq-back-btn {
    background: none;
    border: none;
    color: #007bff;
    cursor: pointer;
    font-size: 14px;
    margin-bottom: 10px;
    padding: 0;
}

.eq-back-btn:hover {
    text-decoration: underline;
}

.eq-insert-btn {
    /* Final 'Add to Paper' button */
    width: 100%;
    /* Spans full modal width */
    padding: 10px;
    /* Generous clickable area */
    background: #28a745;
    /* Success green color */
    color: white;
    /* Clean white text contrast */
    border: none;
    /* Removes default button edge */
    border-radius: 4px;
    /* Matches other UI corners */
    cursor: pointer;
    /* Show interaction possible */
    font-weight: bold;
    /* Emphasis on the primary action */
}

.eq-insert-btn:hover {
    background: #218838;
}

/* --- Registration Number Section --- */
.reg-no-wrapper {
    display: flex;
    align-items: center;
    gap: 10px;
}

.reg-no-label {
    font-weight: bold;
    font-size: 11pt;
}

.reg-no-grid {
    display: flex;
    gap: 0;
    border: 1px solid #000;
}

.reg-no-box {
    width: 25px;
    height: 25px;
    border-right: 1px solid #000;
}

.reg-no-box:last-child {
    border-right: none;
}

/* ========================================
   12. APPLICATION FOOTER
   Styles for the sticky bottom bar 
   with status, credits, and contact.
======================================== */
.app-footer {
    background: var(--color-surface);
    border-top: 1px solid var(--color-border);
    padding: 2px 40px;
    flex-shrink: 0;
    z-index: 100;
}

.footer-content {
    display: flex;
    justify-content: space-between;
    align-items: center;
    max-width: 1200px;
    margin: 0 auto;
    gap: 10px;
}

.footer-info,
.footer-status,
.footer-contact {
    display: flex;
    flex-direction: row;
    gap: 8px;
    flex: 1;
    align-items: center;
}


.version-tag {
    font-size: 0.65rem;
    font-weight: 400;
    color: var(--color-primary);
    background: auto;
    padding: 1px 5px;
    border-radius: 3px;
}

.copyright {
    font-size: 0.65rem;
    color: var(--color-text-muted);
}

.status-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: var(--color-success);
    display: inline-block;
}

.status-text {
    font-size: 0.65rem;
    color: var(--color-text-muted);
}

.contact-label {
    font-size: 0.65rem;
    color: var(--color-text-muted);
}

.contact-link {
    font-size: 0.65rem;
    color: var(--color-primary);
    text-decoration: none;
    font-weight: 600;
}

.contact-link:hover {
    text-decoration: underline;
}

@media (max-width: 768px) {
    .footer-content {
        flex-direction: column;
        gap: 15px;
        text-align: center;
    }

    .footer-info,
    .footer-status,
    .footer-contact {
        align-items: center;
    }
}

/* Consolidated Print Settings */
@media print {
    @page {
        margin: 10mm;
        size: A4;
    }

    /* Hide UI elements */
    .no-print,
    .app-header,
    .progress-indicator,
    .header-actions,
    .paper-toolbar,
    .preview-actions,
    .preview-footer-actions,
    .tab-actions,
    .btn,
    .app-footer {
        display: none !important;
    }

    /* Hide all application tabs by default in print */
    .tab-content {
        display: none !important;
    }

    /* Force visibility only for the Preview Paper tab */
    #tab5.tab-content {
        display: block !important;
        padding: 0 !important;
        margin: 0 !important;
        max-width: none !important;
        background: transparent !important;
        box-shadow: none !important;
        height: auto !important;
        overflow: visible !important;
    }

    /* Hide the helper titles in the preview panel */
    #tab5 .tab-title,
    #tab5 .tab-subtitle,
    #tab5 .tab-header-flex {
        display: none !important;
    }

    body {
        background: #fff !important;
        margin: 0 !important;
        padding: 0 !important;
    }

    .app-container,
    .app-main,
    .preview-container {
        display: block !important;
        width: 100% !important;
        height: auto !important;
        /* Allow multi-page height */
        min-height: auto !important;
        margin: 0 !important;
        padding: 0 !important;
        box-shadow: none !important;
        max-width: none !important;
        overflow: visible !important;
        /* Remove scrollbars and clipping */
    }

    /* The Paper Sheet */
    .paper {
        width: 100% !important;
        min-height: auto !important;
        height: auto !important;
        /* Do NOT force padding to 0, allow JS-set margins to work */
        /* padding: 0 !important;  <-- Removed this */
        margin: 0 !important;
        box-shadow: none !important;
        border: none !important;
        border-radius: 0 !important;
        display: block !important;
        overflow: visible !important;
        background: white !important;
        color: black !important;
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
    }

    /* Section & Question breaks */
    .section {
        page-break-inside: auto !important;
        break-inside: auto !important;
        margin-bottom: 20px !important;
    }

    .question {
        page-break-inside: avoid !important;
        break-inside: avoid !important;
        margin-bottom: 15px !important;
        display: flex !important;
        /* Preserve alignment */
    }

    .question-number {
        width: 35px !important;
        flex-shrink: 0 !important;
    }

    .question-content {
        flex: 1 !important;
    }

    /* Header adjustments */
    .paper-header {
        border-bottom: 2px solid #000 !important;
        margin-bottom: 20px !important;
        padding-bottom: 10px !important;
    }

    /* Reg boxes */
    .reg-no-wrapper {
        margin-bottom: 15px !important;
    }

    .reg-no-box {
        border: 1px solid #000 !important;
        width: 25px !important;
        height: 25px !important;
    }
}

/* Formula Reference Sheet Styles */
.formula-reference-section {
    page-break-before: always;
    margin-top: 50px;
    padding: 30px;
    background: #fff;
    border: 1px solid #ddd;
}

/* --- Formula Reference Sheet Styling --- */
@media screen {
    .formula-reference-section {
        display: none !important;
        /* Hide completely in preview tab */
    }
}

@media print {
    .formula-reference-section {
        display: block !important;
        page-break-before: always;
        border-top: 2px solid #333;
        padding-top: 20px;
    }
}

.chapter-formula-block {
    margin-bottom: 30px;
}

.chapter-formula-block h3 {
    font-family: 'Outfit', sans-serif;
    color: var(--color-primary);
    border-bottom: 2px solid var(--color-primary);
    padding-bottom: 5px;
    margin-bottom: 15px;
    font-size: 1.25rem;
}

.formula-reference-section table {
    width: 100%;
    border-collapse: collapse;
    font-family: 'Times New Roman', serif;
}

.formula-reference-section th,
.formula-reference-section td {
    border: 1px solid #cbd5e1;
    padding: 12px;
    text-align: left;
}

.formula-reference-section th {
    background-color: #f8fafc;
    font-weight: bold;
    text-transform: uppercase;
    font-size: 0.9rem;
    letter-spacing: 0.05em;
}

.formula-reference-section td:last-child {
    text-align: center;
    font-size: 1.1rem;
}